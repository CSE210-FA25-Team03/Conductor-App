# **ADR: Adopt Jest for Backend Unit Testing**

## **Context**

Our backend currently uses the native **Node test runner (`node:test`)** with **Supertest** to verify API endpoints. This works for now because our backend logic is small and simple.

However, as the project grows, the backend will include:

* database access (PostgreSQL)
* external API calls
* input validation
* more complex route and business logic

These require:

* more advanced mocking tools
* better test isolation
* easier test structuring
* built-in coverage reporting

We want a testing framework that keeps development simple today while preparing us for future backend complexity.

## **Decision**

We will adopt **Jest** as our primary backend unit testing framework.

**Team Members Involved:** Andrew Pan, Boqi Zhu
**Date:** 11/18/2025

## **Why Jest?**

Jest provides the ideal balance between power and ease of use for our backend.

### **Reasons We Chose Jest**

* **Excellent mocking support**

  * mock external APIs
  * mock database calls
  * mock modules/functions
* **Snapshot testing** built-in
* **Code coverage** built-in
* **Fast and easy to configure** â€” zero boilerplate
* **Large community and plugin ecosystem**
* **Works naturally with Supertest**
* **Industry standard** for Node/Express testing

These features make Jest well-suited for the next phases of backend development.

### **Why Not Other Tools?**

* **Mocha/Chai**

  * requires multiple packages (Mocha + Chai + Sinon + NYC)
  * more setup and boilerplate

* **Ava / Tape / Tap**

  * minimalistic but smaller ecosystem
  * weaker mocking support

* **Node Test Runner (current)**

  * good for simple routes
  * lacks mocking, snapshots, coverage, and rich tooling

Given our future backend needs, Jest provides the best long-term value.

## **Alternatives Considered**

| Tool                 | Why Not Used                                                             |
| -------------------- | ------------------------------------------------------------------------ |
| **Mocha/Chai**       | Too much configuration; requires multiple add-ons                        |
| **Node Test Runner** | Great for simple tests but lacks mocks, snapshots, and ecosystem support |
| **Ava/Tape**         | Small ecosystems; not ideal for Express apps with external services      |

## **Outcome**

Jest will become our standard backend testing tool as we add more backend logic.
`node:test` may remain for very simple smoke tests, but Jest will be used for:

* unit tests
* integration tests
* mocking database/API calls
* coverage reporting

This improves test robustness and maintainability as backend complexity increases.

## **Status**

**Planning for future adoption**
We will migrate to Jest once backend logic (database/API layers) is implemented and stable.
